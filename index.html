<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PANDUO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #0A0A0A;
            color: #E2E8F0;
            background: radial-gradient(circle at 10% 20%, #1A202C, #0A0A0A);
            animation: pulse-bg 15s infinite alternate ease-in-out;
            min-height: 100vh;
        }

        @keyframes pulse-bg {
            0% { background: radial-gradient(circle at 10% 20%, #1A202C, #0A0A0A); }
            100% { background: radial-gradient(circle at 90% 80%, #171923, #0A0A0A); }
        }

        .container-card {
            background-color: #1a1a1a;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4), 0 5px 10px rgba(0, 0, 0, 0.2);
            border: 1px solid #2D3748;
            backdrop-filter: blur(10px);
            border-radius: 1.5rem;
            animation: fade-in 1s ease-out;
        }

        @keyframes fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bio-title {
            font-family: 'Montserrat', sans-serif;
            color: #C084FC; /* Een diep paars */
            text-shadow: 0 0 10px rgba(192, 132, 252, 0.5);
        }

        .section-title {
            font-family: 'Montserrat', sans-serif;
            color: #F87171; /* Een zacht rood */
        }

        .link-item {
            background-color: rgba(255, 255, 255, 0.05);
            transition: transform 0.3s, background-color 0.3s, box-shadow 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 0.75rem;
        }

        .link-item:hover {
            transform: translateY(-5px);
            background-color: rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
        }

        .icon-svg {
            color: #4A5568;
            transition: color 0.3s ease-in-out, transform 0.3s ease-in-out;
        }

        .link-item:hover .icon-svg {
            color: #C084FC;
            transform: rotate(10deg) scale(1.1);
        }

        .username-link {
            color: #C084FC;
            text-decoration: underline;
            transition: color 0.3s ease-in-out;
        }

        .username-link:hover {
            color: #F87171;
        }

        .language-button {
            background-color: #C084FC;
            color: #1A202C;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 700;
            transition: background-color 0.3s;
        }

        .language-button:hover {
            background-color: #DDAAFA;
        }

        /* FULLSCREEN MODAAL STYLING */
        #fullscreen-player-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #000000;
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s ease-in-out;
        }
        
        #fullscreen-player-modal.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        /* Vinyl Effect Container */
        #fs-art-container {
            position: relative;
            border-radius: 50%; 
            /* De 'vinyl' rand */
            background: #0a0a0a; 
            padding: 1.5rem; /* Ruimte tussen art en record rand */
            box-shadow: 0 0 0 10px #4A5568, /* Grijze vinyl ring */
                        0 0 0 15px #1A202C; /* Buitenste donkere ring */
            transition: transform 0.5s ease-out;
        }
        
        /* Album Art binnen de container */
        #fs-art {
            border-radius: 0.5rem; /* Zachte hoeken voor de hoes */
        }
        
        /* Draai-animatie (alleen actief bij Vinyl) */
        .vinyl-effect-spin {
            animation: vinylSpin 6s linear infinite;
        }
        @keyframes vinylSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Responsieve aanpassing voor Landscape/Desktop */
        @media (orientation: landscape), (min-width: 1024px) {
            #fs-content-wrapper {
                flex-direction: row;
                max-width: 90vw;
                max-height: 80vh;
                align-items: center;
                text-align: left;
                padding-left: 2rem; /* Ruimte aan de zijkant */
            }
            /* Pas de art grootte aan in landscape */
            #fs-art {
                width: 320px;
                height: 320px;
            }
            #fs-text-info {
                margin-left: 4rem; /* Ruimte tussen art en tekst */
                margin-top: 0;
                text-align: left;
            }
        }
        
        /* Standaard (Portrait/Mobile) styling voor de FS content */
        #fs-content-wrapper {
            display: flex;
            flex-direction: column; 
            align-items: center;
            justify-content: center;
            max-width: 90vw;
            max-height: 90vh;
            text-align: center;
        }

        #fs-text-info {
            margin-top: 2rem;
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <!-- HOOFD INHOUD -->
    <div class="container-card p-6 sm:p-10 max-w-2xl lg:max-w-4xl w-full mx-auto">
        
        <!-- Language Switch Button (Gedeeld voor beide talen) -->
        <div class="flex justify-end mb-6">
            <button id="lang-toggle-nl" class="language-button" onclick="toggleLanguage('en')">English Version</button>
            <button id="lang-toggle-en" class="language-button hidden" onclick="toggleLanguage('nl')">Nederlandse Versie</button>
        </div>

        <!-- NEDERLANDSE INHOUD -->
        <div id="dutch-content">
            <!-- Header/Title -->
            <div class="text-center mb-10 sm:mb-16">
                <h1 class="text-4xl sm:text-6xl font-bold bio-title">PANDUO</h1>
                <p class="mt-2 text-sm sm:text-base text-gray-400">Navigeren door het digitale klanklandschap.</p>
            </div>

            <!-- Muziek & Vibe Sectie -->
            <div>
                <h2 class="text-2xl sm:text-3xl font-bold section-title mb-6">Muziek & Vibe</h2>
                <div class="w-full flex flex-col md:flex-row space-y-8 md:space-y-0 md:space-x-8">
                    <!-- Huidige Vibe - Spotify Embed (links) -->
                    <div id="spotify-vibe-nl" class="w-full md:w-1/2">
                        <h3 class="text-xl font-bold mb-4">Huidige Vibe</h3>
                        <div class="w-full">
                            <!-- Spotify Embed: Hoogte 152px met expliciete scrolling="no" om de scrollbar te verwijderen -->
                            <iframe id="spotify-embed-nl" style="border-radius:12px" src="" width="100%" height="152" frameBorder="0" scrolling="no" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
                        </div>
                    </div>

                    <!-- Now Playing - Last.fm API (rechts) -->
                    <div class="w-full md:w-1/2">
                        <!-- Dynamische Titel: Now Playing via Streaming of Now Playing LP -->
                        <h3 id="now-playing-title-nl" class="text-xl font-bold mb-4">Now Playing via Streaming</h3>
                        <div id="now-playing-container-nl" class="flex flex-col items-center justify-center p-4 sm:p-6 bg-gray-800 rounded-lg shadow-inner min-h-[152px]">
                            <p id="now-playing-status-nl" class="text-gray-400">Laden...</p>
                            
                            <!-- Track Info met Album Art (zichtbaar bij actieve track) -->
                            <div id="now-playing-info-nl" class="hidden flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-4 w-full">
                                <!-- Album Art -->
                                <img id="now-playing-art-nl" class="w-16 h-16 sm:w-20 sm:h-20 rounded-lg shadow-lg flex-shrink-0" src="" alt="Album Art">
                                <!-- Text Info -->
                                <div class="flex-grow min-w-0 text-center sm:text-left">
                                    <h4 id="now-playing-track-nl" class="font-bold text-base sm:text-lg text-white truncate"></h4>
                                    <p id="now-playing-artist-nl" class="text-gray-300 text-sm truncate"></p>
                                    <p id="now-playing-source-nl" class="text-xs text-purple-400 mt-1"></p>
                                    
                                    <!-- Fullscreen Knop -->
                                    <button id="fullscreen-btn-nl" onclick="openFullscreenPlayer('nl')" class="hidden mt-2 px-2 py-1 text-xs bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-full transition-colors">
                                        Volledig Scherm
                                    </button>
                                </div>
                            </div>

                            <!-- Dit div wordt getoond als er NIETS wordt afgespeeld -->
                            <div id="now-playing-none-nl" class="hidden text-center max-w-full">
                                <h4 class="font-bold text-lg text-white">Speelt momenteel niets.</h4>
                                <p class="text-xs text-gray-400 mt-2">
                                    Deze sectie toont ofwel een actieve stream, of de laatst gespeelde plaat indien minder dan **5 minuten** geleden gescrobbeld.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Bio Section -->
            <hr class="border-gray-700 my-10">
            <div class="mb-10">
                <h2 class="text-2xl sm:text-3xl font-bold section-title mb-4">Over mij</h2>
                <p class="text-base leading-relaxed text-gray-300">
                    Een creatieve geest met een passie voor zowel het digitale als het hands-on. Hij/Hem, geboren in augustus 2000. Mijn wereld is een mix van het verkennen van nieuwe muziek en het duiken in een verscheidenheid aan gamingwerelden, altijd op zoek naar een nieuwe beat of een nieuwe uitdaging. Dit is mijn digitale ruimte om alles bij te houden. Mijn Reddit is privé voor Redditors.
                </p>
            </div>

            <!-- Gaming Section -->
            <hr class="border-gray-700 my-10">
            <div>
                <h2 class="text-2xl sm:text-3xl font-bold section-title mb-6">Gaming</h2>
                <div class="space-y-6">
                    <!-- Now Playing (Gaming) -->
                    <div class="flex flex-col items-center justify-center p-6 link-item text-center">
                        <span class="text-2xl font-bold">Now Playing (Gaming)</span>
                        <p class="text-xs text-gray-400 mt-2">
                            Kan niet live updaten. Bekijk mijn profiel op <a href="https://steamcommunity.com/id/Panduo/" target="_blank" class="username-link">Steam</a>.
                        </p>
                    </div>
                    
                    <!-- Epic Games - Not Clickable -->
                    <div class="flex items-center space-x-6 p-5 link-item">
                        <span class="w-10 h-10 flex-shrink-0">
                            <!-- Spelcontroller SVG -->
                            <svg class="icon-svg w-full h-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="2" y="7" width="20" height="10" rx="3"></rect>
                                <path d="M6 10h.01"></path>
                                <path d="M18 10h.01"></path>
                                <path d="M6 14h.01"></path>
                                <path d="M18 14h.01"></path>
                                <path d="M11 12h2"></path>
                                <path d="M12 11v2"></path>
                            </svg>
                        </span>
                        <span class="text-lg font-medium">Fortnite / Epic | UnoPanduo</span>
                    </div>
                    <!-- Steam -->
                    <a href="https://steamcommunity.com/id/Panduo/" target="_blank" class="flex items-center space-x-6 p-5 link-item">
                        <span class="w-10 h-10 flex-shrink-0">
                            <!-- Spelcontroller SVG -->
                            <svg class="icon-svg w-full h-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="2" y="7" width="20" height="10" rx="3"></rect>
                                <path d="M6 10h.01"></path>
                                <path d="M18 10h.01"></path>
                                <path d="M6 14h.01"></path>
                                <path d="M18 14h.01"></path>
                                <path d="M11 12h2"></path>
                                <path d="M12 11v2"></path>
                            </svg>
                        </span>
                        <span class="text-lg font-medium">Steam Profiel | <span class="username-link">Panduo</span></span>
                    </a>
                    <!-- EA -->
                    <a href="#" target="_blank" class="flex items-center space-x-6 p-5 link-item">
                        <span class="w-10 h-10 flex-shrink-0">
                            <!-- Spelcontroller SVG -->
                            <svg class="icon-svg w-full h-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="2" y="7" width="20" height="10" rx="3"></rect>
                                <path d="M6 10h.01"></path>
                                <path d="M18 10h.01"></path>
                                <path d="M6 14h.01"></path>
                                <path d="M18 14h.01"></path>
                                <path d="M11 12h2"></path>
                                <path d="M12 11v2"></path>
                            </svg>
                        </span>
                        <span class="text-lg font-medium">EA Profiel | <span class="username-link">Niet verstrekt</span></span>
                    </a>
                </div>
            </div>

            <!-- Social Section -->
            <hr class="border-gray-700 my-10">
            <div>
                <h2 class="text-2xl sm:text-3xl font-bold section-title mb-6">Socials</h2>
                <div class="space-y-6">
                    <!-- Discord - No link -->
                    <div class="flex items-center space-x-6 p-5 link-item">
                        <span class="text-lg font-medium">Discord | UnoPanduo</span>
                    </div>

                    <!-- YouTube -->
                    <a href="https://www.youtube.com/@UnoPanduo" target="_blank" class="flex items-center space-x-6 p-5 link-item">
                        <span class="w-10 h-10 flex-shrink-0">
                            <!-- Afspelen SVG -->
                            <svg class="icon-svg w-full h-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M8 5v14l11-7z"></path>
                            </svg>
                        </span>
                        <span class="text-lg font-medium">YouTube-kanaal | <span class="username-link">@UnoPanduo</span></span>
                    </a>
                </div>
            </div>
        </div>
        
        <!-- ENGELSE INHOUD -->
        <div id="english-content" class="hidden">
            <!-- Header/Title -->
            <div class="text-center mb-10 sm:mb-16">
                <h1 class="text-4xl sm:text-6xl font-bold bio-title">PANDUO</h1>
                <p class="mt-2 text-sm sm:text-base text-gray-400">Navigating the digital soundscape.</p>
            </div>

            <!-- Music & Vibe Section -->
            <div>
                <h2 class="text-2xl sm:text-3xl font-bold section-title mb-6">Music & Vibe</h2>
                <div class="w-full flex flex-col md:flex-row space-y-8 md:space-y-0 md:space-x-8">
                    <!-- Current Vibe - Spotify Embed (links) -->
                    <div id="spotify-vibe-en" class="w-full md:w-1/2">
                        <h3 class="text-xl font-bold mb-4">Current Vibe</h3>
                        <div class="w-full">
                            <!-- Spotify Embed: Height 152px with explicit scrolling="no" to remove the scrollbar -->
                            <iframe id="spotify-embed-en" style="border-radius:12px" src="" width="100%" height="152" frameBorder="0" scrolling="no" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
                        </div>
                    </div>

                    <!-- Now Playing - Last.fm API (rechts) -->
                    <div class="w-full md:w-1/2">
                        <!-- Dynamische Titel: Now Playing via Streaming of Now Playing on Vinyl -->
                        <h3 id="now-playing-title-en" class="text-xl font-bold mb-4">Now Playing via Streaming</h3>
                        <div id="now-playing-container-en" class="flex flex-col items-center justify-center p-4 sm:p-6 bg-gray-800 rounded-lg shadow-inner min-h-[152px]">
                            <p id="now-playing-status-en" class="text-gray-400">Loading...</p>
                            
                            <!-- Track Info met Album Art (zichtbaar bij actieve track) -->
                            <div id="now-playing-info-en" class="hidden flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-4 w-full">
                                <!-- Album Art -->
                                <img id="now-playing-art-en" class="w-16 h-16 sm:w-20 sm:h-20 rounded-lg shadow-lg flex-shrink-0" src="" alt="Album Art">
                                <!-- Text Info -->
                                <div class="flex-grow min-w-0 text-center sm:text-left">
                                    <h4 id="now-playing-track-en" class="font-bold text-base sm:text-lg text-white truncate"></h4>
                                    <p id="now-playing-artist-en" class="text-gray-300 text-sm truncate"></p>
                                    <p id="now-playing-source-en" class="text-xs text-purple-400 mt-1"></p>

                                    <!-- Fullscreen Button -->
                                    <button id="fullscreen-btn-en" onclick="openFullscreenPlayer('en')" class="hidden mt-2 px-2 py-1 text-xs bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-full transition-colors">
                                        Full Screen
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Dit div wordt getoond als er NIETS wordt afgespeeld -->
                            <div id="now-playing-none-en" class="hidden text-center max-w-full">
                                <h4 class="font-bold text-lg text-white">Nothing playing right now.</h4>
                                <p class="text-xs text-gray-400 mt-2">
                                    This section shows either an active stream, or the last played vinyl record if scrobbled less than **5 minutes** ago.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Bio Section -->
            <hr class="border-gray-700 my-10">
            <div class="mb-10">
                <h2 class="text-2xl sm:text-3xl font-bold section-title mb-4">About Me</h2>
                <p class="text-base leading-relaxed text-gray-300">
                    A creative mind with a passion for both the digital and the hands-on. He/Him, born in August 2000. My world is a blend of exploring new music and diving into a variety of gaming realms, always looking for a new beat or a new challenge. This is my digital space to keep track of everything. My Reddit is private for Redditors.
                </p>
            </div>

            <!-- Gaming Section -->
            <hr class="border-gray-700 my-10">
            <div>
                <h2 class="text-2xl sm:text-3xl font-bold section-title mb-6">Gaming</h2>
                <div class="space-y-6">
                    <!-- Now Playing (Gaming) -->
                    <div class="flex flex-col items-center justify-center p-6 link-item text-center">
                        <span class="text-2xl font-bold">Now Playing (Gaming)</span>
                        <p class="text-xs text-gray-400 mt-2">
                            Cannot update live. View my profile on <a href="https://steamcommunity.com/id/Panduo/" target="_blank" class="username-link">Steam</a>.
                        </p>
                    </div>
                    
                    <!-- Epic Games - Not Clickable -->
                    <div class="flex items-center space-x-6 p-5 link-item">
                        <span class="w-10 h-10 flex-shrink-0">
                            <!-- Game Controller SVG -->
                            <svg class="icon-svg w-full h-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="2" y="7" width="20" height="10" rx="3"></rect>
                                <path d="M6 10h.01"></path>
                                <path d="M18 10h.01"></path>
                                <path d="M6 14h.01"></path>
                                <path d="M18 14h.01"></path>
                                <path d="M11 12h2"></path>
                                <path d="M12 11v2"></path>
                            </svg>
                        </span>
                        <span class="text-lg font-medium">Fortnite / Epic | UnoPanduo</span>
                    </div>
                    <!-- Steam -->
                    <a href="https://steamcommunity.com/id/Panduo/" target="_blank" class="flex items-center space-x-6 p-5 link-item">
                        <span class="w-10 h-10 flex-shrink-0">
                            <!-- Game Controller SVG -->
                            <svg class="icon-svg w-full h-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="2" y="7" width="20" height="10" rx="3"></rect>
                                <path d="M6 10h.01"></path>
                                <path d="M18 10h.01"></path>
                                <path d="M6 14h.01"></path>
                                <path d="M18 14h.01"></path>
                                <path d="M11 12h2"></path>
                                <path d="M12 11v2"></path>
                            </svg>
                        </span>
                        <span class="text-lg font-medium">Steam Profile | <span class="username-link">Panduo</span></span>
                    </a>
                    <!-- EA -->
                    <a href="#" target="_blank" class="flex items-center space-x-6 p-5 link-item">
                        <span class="w-10 h-10 flex-shrink-0">
                            <!-- Game Controller SVG -->
                            <svg class="icon-svg w-full h-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="2" y="7" width="20" height="10" rx="3"></rect>
                                <path d="M6 10h.01"></path>
                                <path d="M18 10h.01"></path>
                                <path d="M6 14h.01"></path>
                                <path d="M18 14h.01"></path>
                                <path d="M11 12h2"></path>
                                <path d="M12 11v2"></path>
                            </svg>
                        </span>
                        <span class="text-lg font-medium">EA Profile | <span class="username-link">Not provided</span></span>
                    </a>
                </div>
            </div>

            <!-- Social Section -->
            <hr class="border-gray-700 my-10">
            <div>
                <h2 class="text-2xl sm:text-3xl font-bold section-title mb-6">Socials</h2>
                <div class="space-y-6">
                    <!-- Discord - No link -->
                    <div class="flex items-center space-x-6 p-5 link-item">
                        <span class="text-lg font-medium">Discord | UnoPanduo</span>
                    </div>

                    <!-- YouTube -->
                    <a href="https://www.youtube.com/@UnoPanduo" target="_blank" class="flex items-center space-x-6 p-5 link-item">
                        <span class="w-10 h-10 flex-shrink-0">
                            <!-- Play SVG -->
                            <svg class="icon-svg w-full h-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M8 5v14l11-7z"></path>
                            </svg>
                        </span>
                        <span class="text-lg font-medium">YouTube Channel | <span class="username-link">@UnoPanduo</span></span>
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- FULLSCREEN MODAAL SPELER -->
    <div id="fullscreen-player-modal" class="hidden text-center" onclick="closeFullscreenPlayer()">
        <button class="absolute top-4 right-4 text-white text-3xl font-light p-2 rounded-full hover:bg-gray-800 transition-colors" aria-label="Sluiten">
            &times;
        </button>

        <div id="fs-content-wrapper" class="p-8">
            <!-- Album Art with Vinyl Effect -->
            <div id="fs-art-container" class="relative">
                <img id="fs-art" class="w-64 h-64 sm:w-80 sm:h-80 rounded-lg shadow-2xl flex-shrink-0" src="" alt="Album Art">
            </div>

            <!-- Text Info -->
            <div id="fs-text-info" class="mt-8 text-center">
                <p id="fs-source" class="text-xl sm:text-2xl text-purple-400 font-bold mb-4"></p>
                <h1 id="fs-track" class="text-5xl sm:text-7xl font-extrabold text-white mb-2 max-w-full leading-tight"></h1>
                <p id="fs-artist" class="text-2xl sm:text-3xl text-gray-300 max-w-full"></p>
            </div>
        </div>
    </div>


    <script>
        // 🎼 PAS DEZE VARIABELE AAN OM DE SPOTIFY TRACK TE WIJZIGEN
        const SPOTIFY_URI = '4wxJZae52sNfAx6K5FTajL';
        // -----------------------------------------------------------

        const SPOTIFY_BASE_URL = 'https://open.spotify.com/embed/track/';
        const LASTFM_API_KEY = 'a1e23f2502881d4d5ce462128b81bb7b';
        const LASTFM_USERNAME = 'ItsDapanda';
        
        // Timerinstellingen
        const API_POLLING_INTERVAL = 10000; // 10 seconden voor API-check
        const VINYL_TIME_LIMIT_MS = 5 * 60 * 1000; // 5 minuten
        const PLACEHOLDER_ART = 'https://placehold.co/80x80/2D3748/C084FC?text=LP';

        // Globale staat voor de live timer
        let vinylScrobbleTime = null; 
        let apiPollingInterval = null;    // Interval voor de 10s API check
        let liveTimerInterval = null;     // Interval voor de 1s visuele countdown
        
        // Standaardteksten
        const DEFAULT_TITLE_NL = 'Now Playing via Streaming';
        const DEFAULT_TITLE_EN = 'Now Playing via Streaming';
        const VINYL_TITLE_NL = 'Now Playing LP';
        const VINYL_TITLE_EN = 'Now Playing on Vinyl';
        const STREAMING_SOURCE_NL = 'Momenteel aan het streamen';
        const STREAMING_SOURCE_EN = 'Currently streaming';
        const VINYL_SOURCE_NL = `Laatst gestart nummer:`; 
        const VINYL_SOURCE_EN = `Last started track:`; 
        
        // Functie om de 1s live timer bij te werken (zorgt voor de vloeiende beweging)
        function updateTimer() {
            if (vinylScrobbleTime === null) {
                // Vinyl is niet actief, dus stop de 1s timer
                if (liveTimerInterval) {
                    clearInterval(liveTimerInterval);
                    liveTimerInterval = null;
                }
                return;
            }

            const now = Date.now();
            const elapsedMs = now - vinylScrobbleTime;

            // Controleer of de 5 minuten limiet is bereikt
            if (elapsedMs > VINYL_TIME_LIMIT_MS) {
                // Timer is verlopen, forceer een nieuwe API check die de status zal updaten
                if (liveTimerInterval) {
                    clearInterval(liveTimerInterval);
                    liveTimerInterval = null;
                }
                closeFullscreenPlayer(); // Sluit fullscreen als de tijd om is
                fetchLastFmStatus(); 
                return;
            }
            
            // Bereken minuten en seconden
            const elapsedMinutes = Math.floor(elapsedMs / 60000);
            const elapsedSeconds = Math.floor((elapsedMs % 60000) / 1000);

            // Formatteer de verstreken tijd
            const timeFormatNl = `(${elapsedMinutes}m ${elapsedSeconds}s geleden)`;
            const timeFormatEn = `(${elapsedMinutes}m ${elapsedSeconds}s ago)`;

            // Update UI elementen voor beide talen (hoofdweergave)
            const sourceElNl = document.getElementById(`now-playing-source-nl`);
            const sourceElEn = document.getElementById(`now-playing-source-en`);

            if (sourceElNl) {
                sourceElNl.textContent = `${VINYL_SOURCE_NL} ${timeFormatNl}`;
            }
            if (sourceElEn) {
                sourceElEn.textContent = `${VINYL_SOURCE_EN} ${timeFormatEn}`;
            }

            // Update Fullscreen modaal als deze open is
            const fsModal = document.getElementById('fullscreen-player-modal');
            if (!fsModal.classList.contains('hidden')) {
                const fsSource = document.getElementById('fs-source');
                const currentLang = localStorage.getItem('language') || 'en';
                const fsPrefix = currentLang === 'nl' ? VINYL_SOURCE_NL : VINYL_SOURCE_EN;
                const fsTimeFormat = currentLang === 'nl' ? timeFormatNl : timeFormatEn;
                fsSource.textContent = `${fsPrefix} ${fsTimeFormat}`;
            }
        }

        // Functie om de taal te wisselen
        function toggleLanguage(lang) {
            const dutchContent = document.getElementById('dutch-content');
            const englishContent = document.getElementById('english-content');
            const toggleNl = document.getElementById('lang-toggle-nl');
            const toggleEn = document.getElementById('lang-toggle-en');

            if (lang === 'en') {
                dutchContent.classList.add('hidden');
                englishContent.classList.remove('hidden');
                toggleNl.classList.add('hidden');
                toggleEn.classList.remove('hidden');
                localStorage.setItem('language', 'en');
            } else {
                dutchContent.classList.remove('hidden');
                englishContent.classList.add('hidden');
                toggleNl.classList.remove('hidden');
                toggleEn.classList.add('hidden');
                localStorage.setItem('language', 'nl');
            }
            
            // Zorg ervoor dat de fullscreen mode de juiste taal toont indien open
            if (!document.getElementById('fullscreen-player-modal').classList.contains('hidden')) {
                if (vinylScrobbleTime !== null) {
                    updateTimer(); // Roept de timer update aan die de taal afhandelt
                } else {
                    // Update voor streaming source (die statisch is)
                    const fsSource = document.getElementById('fs-source');
                    fsSource.textContent = lang === 'nl' ? STREAMING_SOURCE_NL : STREAMING_SOURCE_EN;
                }
            }
        }

        // Functie om de Fullscreen Player te openen
        function openFullscreenPlayer(lang) {
            const artEl = document.getElementById(`now-playing-art-${lang}`);
            const trackEl = document.getElementById(`now-playing-track-${lang}`);
            const artistEl = document.getElementById(`now-playing-artist-${lang}`);

            const fsModal = document.getElementById('fullscreen-player-modal');
            
            // Kopieer gegevens naar het modaal
            document.getElementById('fs-art').src = artEl.src;
            document.getElementById('fs-track').textContent = trackEl.textContent;
            document.getElementById('fs-artist').textContent = artistEl.textContent;
            
            // Source is dynamisch (timer) of statisch (streaming)
            if (vinylScrobbleTime !== null) {
                // Timer is actief, de updateTimer functie handelt de taal af
                updateTimer(); 
            } else {
                document.getElementById('fs-source').textContent = lang === 'nl' ? STREAMING_SOURCE_NL : STREAMING_SOURCE_EN;
            }

            // Toon modaal
            fsModal.classList.remove('hidden');
        }

        // Functie om de Fullscreen Player te sluiten
        function closeFullscreenPlayer() {
            const fsModal = document.getElementById('fullscreen-player-modal');
            fsModal.classList.add('hidden');
        }

        // Functie om de Last.fm status op te halen en beide taalblokken bij te werken (10s polling)
        async function fetchLastFmStatus() {
            try {
                const response = await fetch(`https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${LASTFM_USERNAME}&api_key=${LASTFM_API_KEY}&format=json&limit=1`);
                const data = await response.json();
                
                const now = Date.now();
                let trackName = '';
                let artistName = '';
                let albumArtUrl = PLACEHOLDER_ART; 
                let isPlaying = false;
                let isRecentVinyl = false; 
                let trackTimeMs = null; 

                if (data.recenttracks && data.recenttracks.track && data.recenttracks.track.length > 0) {
                    const track = data.recenttracks.track[0];
                    trackName = track.name;
                    artistName = track.artist['#text'];

                    if (track.image && track.image.length > 3 && track.image[3]['#text']) {
                        albumArtUrl = track.image[3]['#text'] || PLACEHOLDER_ART;
                    }

                    // 1. Controleer of de track momenteel wordt afgespeeld (Streaming)
                    if (track['@attr'] && track['@attr'].nowplaying) {
                        isPlaying = true;
                        // Als er nu gestreamd wordt, moet de vinylScrobbleTime en timer gestopt worden
                        trackTimeMs = now; // Stel de scrobble tijd in op nu voor de streaming bron
                    } 
                    
                    // 2. Controleer of de track recentelijk via Vinyl is afgespeeld (tijd check)
                    if (track.date && track.date.uts) {
                        const scrobbleTime = parseInt(track.date.uts) * 1000;
                        const timeDifference = now - scrobbleTime;

                        // Een 'Scrobble' van een plaat wordt altijd getagd met 'Discogs', 'Vinyl', 'Rarities', etc.
                        // We checken of het geen 'nowplaying' is, maar wel recentelijk gescrobbled.
                        const isVinylScrobble = track.album['#text'].toLowerCase().includes('vinyl') || track.album['#text'].toLowerCase().includes('discogs');

                        if (!isPlaying && timeDifference <= VINYL_TIME_LIMIT_MS && timeDifference > 0 && isVinylScrobble) {
                            isRecentVinyl = true;
                            trackTimeMs = scrobbleTime; // Gebruik de daadwerkelijke scrobble tijd
                        }
                    }
                }
                
                // Functie om de UI te updaten voor een specifieke taal
                function updateUI(lang, isPlaying, isRecentVinyl, trackName, artistName, albumArtUrl, trackTimeMs) {
                    const statusEl = document.getElementById(`now-playing-status-${lang}`);
                    const infoEl = document.getElementById(`now-playing-info-${lang}`);
                    const noneEl = document.getElementById(`now-playing-none-${lang}`);
                    const trackEl = document.getElementById(`now-playing-track-${lang}`);
                    const artistEl = document.getElementById(`now-playing-artist-${lang}`);
                    const artEl = document.getElementById(`now-playing-art-${lang}`);
                    const sourceEl = document.getElementById(`now-playing-source-${lang}`);
                    const titleEl = document.getElementById(`now-playing-title-${lang}`);
                    const spotifyVibeEl = document.getElementById(`spotify-vibe-${lang}`);
                    const fullscreenBtn = document.getElementById(`fullscreen-btn-${lang}`);
                    const fsArtContainer = document.getElementById('fs-art-container');
                    
                    const defaultTitle = lang === 'nl' ? DEFAULT_TITLE_NL : DEFAULT_TITLE_EN;
                    const vinylTitle = lang === 'nl' ? VINYL_TITLE_NL : VINYL_TITLE_EN;
                    const streamingSourceText = lang === 'nl' ? STREAMING_SOURCE_NL : STREAMING_SOURCE_EN;
                    
                    
                    if (isPlaying || isRecentVinyl) {
                        // Toon de Now Playing sectie
                        statusEl.classList.add('hidden');
                        noneEl.classList.add('hidden');
                        infoEl.classList.remove('hidden');
                        fullscreenBtn.classList.remove('hidden'); 
                        trackEl.textContent = trackName;
                        artistEl.textContent = artistName;
                        artEl.src = albumArtUrl;
                        artEl.onerror = () => artEl.src = PLACEHOLDER_ART; 
                        
                        // Fullscreen Vinyl Spin Effect
                        if (isRecentVinyl) {
                            fsArtContainer.classList.add('vinyl-effect-spin');
                        } else {
                            fsArtContainer.classList.remove('vinyl-effect-spin');
                        }
                        
                        // Logica voor Vinyl (live timer)
                        if (isRecentVinyl) {
                            titleEl.textContent = vinylTitle;
                            sourceEl.textContent = (lang === 'nl' ? VINYL_SOURCE_NL : VINYL_SOURCE_EN);
                            spotifyVibeEl.classList.add('hidden'); // Verberg Spotify
                            
                            // Start de 1s visuele timer als deze nog niet loopt
                            vinylScrobbleTime = trackTimeMs; 
                            if (!liveTimerInterval) {
                                liveTimerInterval = setInterval(updateTimer, 1000); // Start 1s timer voor smooth update
                            }
                            updateTimer(); // Eerste update direct uitvoeren
                        } else {
                            // Logica voor Streaming/Geen Vinyl (statische bron)
                            titleEl.textContent = defaultTitle;
                            sourceEl.textContent = streamingSourceText;
                            spotifyVibeEl.classList.remove('hidden'); 

                            // Stop de 1s visuele timer
                            vinylScrobbleTime = null;
                            if (liveTimerInterval) {
                                clearInterval(liveTimerInterval);
                                liveTimerInterval = null;
                            }
                        }
                    } else {
                        // Geen recente of huidige track
                        statusEl.classList.add('hidden');
                        infoEl.classList.add('hidden');
                        fullscreenBtn.classList.add('hidden'); 
                        noneEl.classList.remove('hidden'); 
                        titleEl.textContent = defaultTitle;
                        spotifyVibeEl.classList.remove('hidden'); 

                        // Timer Cleanup
                        vinylScrobbleTime = null;
                        if (liveTimerInterval) {
                            clearInterval(liveTimerInterval);
                            liveTimerInterval = null;
                        }
                        fsArtContainer.classList.remove('vinyl-effect-spin');
                        closeFullscreenPlayer(); 
                    }
                }

                // Update voor beide talen
                updateUI('nl', isPlaying, isRecentVinyl, trackName, artistName, albumArtUrl, trackTimeMs);
                updateUI('en', isPlaying, isRecentVinyl, trackName, artistName, albumArtUrl, trackTimeMs);


            } catch (error) {
                console.error("Fout bij het ophalen van Last.fm-gegevens:", error);
                // ... Foutafhandeling ... (onveranderd)
                const statusNl = document.getElementById('now-playing-status-nl');
                statusNl.textContent = "Fout bij het laden van gegevens.";
                statusNl.classList.remove('hidden');
                document.getElementById('now-playing-info-nl').classList.add('hidden');
                document.getElementById('now-playing-none-nl').classList.add('hidden');
                document.getElementById('spotify-vibe-nl').classList.remove('hidden');
                document.getElementById('fullscreen-btn-nl').classList.add('hidden');
                const statusEn = document.getElementById('now-playing-status-en');
                statusEn.textContent = "Error loading data.";
                statusEn.classList.remove('hidden');
                document.getElementById('now-playing-info-en').classList.add('hidden');
                document.getElementById('now-playing-none-en').classList.add('hidden');
                document.getElementById('spotify-vibe-en').classList.remove('hidden');
                document.getElementById('fullscreen-btn-en').classList.add('hidden');
                
                // Zorg ervoor dat de 1s timer stopt bij een fout
                if (liveTimerInterval) {
                    clearInterval(liveTimerInterval);
                    liveTimerInterval = null;
                }
                vinylScrobbleTime = null;
                document.getElementById('fs-art-container').classList.remove('vinyl-effect-spin');
                closeFullscreenPlayer(); 
            }
        }
        
        // Initialisatie
        document.addEventListener('DOMContentLoaded', () => {
            // 1. Stel de Spotify URI in
            const nlIframe = document.getElementById('spotify-embed-nl');
            const enIframe = document.getElementById('spotify-embed-en');

            if (nlIframe) nlIframe.src = SPOTIFY_BASE_URL + SPOTIFY_URI;
            if (enIframe) enIframe.src = SPOTIFY_BASE_URL + SPOTIFY_URI;

            // 2. Stel de taal in
            const savedLang = localStorage.getItem('language') || 'en'; 
            toggleLanguage(savedLang);

            // 3. Start de 10s API Polling
            fetchLastFmStatus();
            // Start de API polling interval (deze variabele is nu apart en duidelijk)
            apiPollingInterval = setInterval(fetchLastFmStatus, API_POLLING_INTERVAL);
            
            // 4. Sluiten van fullscreen met de ESC-toets
            document.addEventListener('keydown', (e) => {
                // Sluit de fullscreen-speler als op de ESC-toets wordt gedrukt
                if (e.key === 'Escape') {
                    closeFullscreenPlayer();
                }
            });
        });
    </script>
</body>
</html>
